<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Live Signup Display</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='display.css') }}">
  </head>
  <body class="display-mode">
    {% set first_entry = entries[0] if entries else None %}
    <div class="display-wrapper">
      <header class="display-header">
        <h1>Qiana and Tony's 2nd Annual Halloween Party</h1>
        <p>Live signup rotation for the big night</p>
      </header>

      <main class="display-main">
        <section class="display-card{% if first_entry %} active{% endif %}{% if first_entry and first_entry.get('cta') %} cta{% endif %}" data-display-card{% if not first_entry %} hidden{% endif %}>
          <div class="display-category" data-entry-type>{{ first_entry['category'] if first_entry else '' }}</div>
          <div class="display-primary" data-entry-primary>{{ first_entry['primary'] if first_entry else '' }}</div>
          <div class="display-secondary" data-entry-secondary>{{ first_entry['secondary'] if first_entry else '' }}</div>
          <div class="display-tertiary" data-entry-tertiary{% if not first_entry or not first_entry['tertiary'] %} hidden{% endif %}>{{ first_entry['tertiary'] if first_entry and first_entry['tertiary'] else '' }}</div>
          <a
            class="display-cta-link"
            data-entry-link
            {% if not first_entry or not first_entry.get('link') %}hidden{% endif %}
            {% if first_entry and first_entry.get('link') %}href="{{ first_entry['link'] }}"{% endif %}
            target="_blank"
            rel="noopener"
          >{{ first_entry['link_label'] if first_entry and first_entry.get('link_label') else (first_entry['link'] if first_entry and first_entry.get('link') else '') }}</a>
        </section>

        <section class="display-empty{% if not entries %} is-visible{% endif %}" data-empty-state>
          <p>No signups yet. Encourage guests to join the fun!</p>
          <ol>
            <li>
              Connect to the <strong>Halloween Party Wi-Fi</strong> network (password: <strong>halloween</strong>).
            </li>
            <li>
              Open a browser and go to
              <a href="http://10.0.0.241/halloween" target="_blank" rel="noopener">http://10.0.0.241/halloween</a>
              to sign upâ€”the page won't appear automatically.
            </li>
          </ol>
        </section>
      </main>

      <footer class="display-footer">
        <div class="display-count">
          Costume signups: <strong data-costume-count>{{ costume_count }}</strong>
        </div>
        <div class="display-count">
          Karaoke signups: <strong data-karaoke-count>{{ karaoke_count }}</strong>
        </div>
        <div class="display-hint">Entries rotate and refresh automatically</div>
      </footer>
    </div>

    <script id="entries-data" type="application/json">{{ entries | tojson }}</script>
    <script src="{{ url_for('static', filename='display.js') }}"></script>
  </body>
</html>
