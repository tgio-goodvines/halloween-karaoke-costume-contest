<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Live Signup Display</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='display.css') }}">
  </head>
  <body class="display-mode">
    {% set first_entry = entries[0] if entries else None %}
    {% set cta_details = first_entry.get('cta_details', {}) if first_entry else {} %}
    {% set cta_lede = cta_details.get('lede', '') %}
    {% set cta_wifi_network = cta_details.get('wifi_network', '') %}
    {% set cta_wifi_password = cta_details.get('wifi_password', '') %}
    {% set cta_portal_url = cta_details.get('portal_url', '') %}
    {% if not cta_portal_url %}
      {% set cta_portal_url = first_entry['link'] if first_entry and first_entry.get('link') else '' %}
    {% endif %}
    {% set cta_portal_label = cta_details.get('portal_label', cta_portal_url) %}
    {% set cta_portal_note = cta_details.get('portal_note', '') %}
    {% set cta_reminder = cta_details.get('reminder', first_entry['tertiary'] if first_entry and first_entry.get('tertiary') else '') %}
    <div class="display-wrapper">
      <header class="display-header">
        <h1>Qiana and Tony's 2nd Annual Halloween Party</h1>
        <div class="display-metrics">
          <div class="display-count">
            <span class="display-count__number" data-costume-count>{{ costume_count }}</span>
            <span class="display-count__label">Costume signups</span>
          </div>
          <div class="display-count">
            <span class="display-count__number" data-karaoke-count>{{ karaoke_count }}</span>
            <span class="display-count__label">Karaoke signups</span>
          </div>
        </div>
      </header>

      <main class="display-main">
        <section class="display-card{% if first_entry %} active{% endif %}{% if first_entry and first_entry.get('cta') %} cta{% endif %}" data-display-card{% if not first_entry %} hidden{% endif %}>
          <div class="display-card__default" data-entry-default{% if first_entry and first_entry.get('cta_details') %} hidden{% endif %}>
            <div class="display-category" data-entry-type>{{ first_entry['category'] if first_entry else '' }}</div>
            <div class="display-primary" data-entry-primary>{{ first_entry['primary'] if first_entry else '' }}</div>
            <div class="display-secondary" data-entry-secondary>{{ first_entry['secondary'] if first_entry else '' }}</div>
            <div class="display-tertiary" data-entry-tertiary{% if not first_entry or not first_entry['tertiary'] %} hidden{% endif %}>{{ first_entry['tertiary'] if first_entry and first_entry['tertiary'] else '' }}</div>
          </div>
          <div class="display-cta-layout" data-cta-layout{% if not first_entry or not first_entry.get('cta_details') %} hidden{% endif %}>
            <p class="display-cta-lede" data-cta-lede>{{ cta_lede }}</p>
            <div class="display-cta-columns">
              <section class="display-cta-column">
                <h3 class="display-cta-heading">Wi-Fi access</h3>
                <dl class="display-cta-list">
                  <div class="display-cta-list__item">
                    <dt>Network</dt>
                    <dd data-cta-wifi-network>{{ cta_wifi_network }}</dd>
                  </div>
                  <div class="display-cta-list__item">
                    <dt>Password</dt>
                    <dd data-cta-wifi-password>{{ cta_wifi_password }}</dd>
                  </div>
                </dl>
              </section>
              <section class="display-cta-column">
                <h3 class="display-cta-heading">Signup portal</h3>
                <p class="display-cta-text" data-cta-portal-note>{{ cta_portal_note }}</p>
                <a
                  class="display-cta-url"
                  data-cta-portal-link
                  {% if cta_portal_url %}href="{{ cta_portal_url }}"{% endif %}
                  target="_blank"
                  rel="noopener"
                >{{ cta_portal_label }}</a>
              </section>
            </div>
            <p class="display-cta-reminder" data-cta-reminder>{{ cta_reminder }}</p>
          </div>

          <a
            class="display-cta-link"
            data-entry-link
            {% if not first_entry or not first_entry.get('link') %}hidden{% endif %}
            {% if first_entry and first_entry.get('link') %}href="{{ first_entry['link'] }}"{% endif %}
            target="_blank"
            rel="noopener"
          >{{ first_entry['link_label'] if first_entry and first_entry.get('link_label') else (first_entry['link'] if first_entry and first_entry.get('link') else '') }}</a>
        </section>

        <section class="display-empty{% if not entries %} is-visible{% endif %}" data-empty-state>
          <div class="instruction-card">
            <div class="instruction-card__badge" aria-hidden="true">ðŸ‘»</div>
            <h2 class="instruction-card__title">Guide guests onto the signup hub</h2>
            <p class="instruction-card__subtitle">
              Walk them through these quick steps to get costumes and karaoke songs into the rotation.
            </p>
            <ol class="instruction-steps">
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Connect to the party Wi-Fi</h3>
                <p class="instruction-step__body">Open Wi-Fi settings and join our dedicated network.</p>
                <div class="instruction-callout" role="group" aria-label="Wi-Fi credentials">
                  <div class="instruction-callout__item">
                    <span class="instruction-callout__label">Network</span>
                    <strong class="instruction-callout__value">Halloween Party Wi-Fi</strong>
                  </div>
                  <div class="instruction-callout__item">
                    <span class="instruction-callout__label">Password</span>
                    <strong class="instruction-callout__value">halloween</strong>
                  </div>
                </div>
              </li>
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Visit the Halloween hub</h3>
                <p class="instruction-step__body">
                  In a browser, enter the address below to load the signup page.
                </p>
                <p class="instruction-step__body">
                  <a class="instruction-url" href="http://10.0.0.241/halloween" target="_blank" rel="noopener">http://10.0.0.241/halloween</a>
                </p>
              </li>
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Add their picks to the lineup</h3>
                <p class="instruction-step__body">
                  Use the forms on the page to submit their costume and queue a karaoke song so it appears on this screen.
                </p>
                <ul class="instruction-substeps">
                  <li>Tap the <strong>Costume</strong> form for outfit entries.</li>
                  <li>Tap the <strong>Karaoke</strong> form to reserve a song.</li>
                </ul>
              </li>
            </ol>
          </div>
        </section>
      </main>
    </div>

    <script id="entries-data" type="application/json">{{ entries | tojson }}</script>
    <script src="{{ url_for('static', filename='display.js') }}"></script>
  </body>
</html>
