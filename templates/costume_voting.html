{% extends "base.html" %}
{% set title = "Costume Contest Voting" %}

{% block content %}
<section class="form-section">
  <h2>Costume Contest Voting</h2>
  <p>Score each costume from 1 (needs more spook) to 10 (absolute showstopper). Make sure you enter a score for every contestant before submitting your ballot.</p>

  <div class="voting-reminder" role="note">
    <strong>Reminder:</strong> Youâ€™ll be asked to rate every costume. Double-check that all fields are filled before you press submit so your scores count.
  </div>

  {% if submitted and not errors %}
    <div class="success">Thanks for voting{% if username %}, {{ username }}{% endif %}! Your scores have been recorded.</div>
  {% endif %}

  {% if errors %}
    <div class="errors">
      <ul>
        {% for error in errors %}
          <li>{{ error }}</li>
        {% endfor %}
      </ul>
    </div>
  {% endif %}

  {% if costume_signups and not user_has_voted %}
    <form method="post" class="voting-form">
      <div class="voting-grid">
        {% for signup in costume_signups %}
          <fieldset class="voting-card">
            <legend>
              <span class="voting-card__name">{{ signup.name }}</span>
              <span class="voting-card__costume">as {{ signup.costume }}</span>
            </legend>
            <label class="voting-card__label" for="rating_{{ loop.index0 }}">
              Score (1-10)
              <input
                type="number"
                id="rating_{{ loop.index0 }}"
                name="rating_{{ loop.index0 }}"
                min="1"
                max="10"
                inputmode="numeric"
                required
              >
            </label>
          </fieldset>
        {% endfor %}
      </div>

      <div class="voting-form__submit">
        <button type="submit" class="button button--primary">Submit My Costume Scores</button>
      </div>
    </form>
  {% elif costume_signups %}
    <p class="success">Thanks again for voting! Only one ballot is counted per guest.</p>
  {% else %}
    <p class="admin-empty">No costume entries have been submitted yet. Check back once the contest lineup is ready!</p>
  {% endif %}
</section>
{% endblock %}
