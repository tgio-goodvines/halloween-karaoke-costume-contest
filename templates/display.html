<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Live Signup Display</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='display.css') }}">
  </head>
  <body
    class="display-mode"
    data-display-api="{{ url_for('display_data') }}"
    data-display-updates="{{ url_for('display_updates') }}"
  >
    {% set first_entry = entries[0] if entries else None %}
    {% set cta_details = first_entry.get('cta_details', {}) if first_entry else {} %}
    {% set cta_lede = cta_details.get('lede', '') %}
    {% set cta_wifi_network = cta_details.get('wifi_network', '') %}
    {% set cta_wifi_password = cta_details.get('wifi_password', '') %}
    {% set cta_portal_url = cta_details.get('portal_url', '') %}
    {% if not cta_portal_url %}
      {% set cta_portal_url = first_entry['link'] if first_entry and first_entry.get('link') else '' %}
    {% endif %}
    {% set cta_portal_label = cta_details.get('portal_label', cta_portal_url) %}
    {% set cta_portal_note = cta_details.get('portal_note', '') %}
    {% set cta_reminder = cta_details.get('reminder', first_entry['tertiary'] if first_entry and first_entry.get('tertiary') else '') %}
    <div class="display-wrapper">
      <header class="display-header">
        <h1>Qiana and Tony's 2nd Annual Halloween Party</h1>
        <div class="display-metrics">
          <div class="display-count">
            <span class="display-count__number" data-costume-count>{{ costume_count }}</span>
            <span class="display-count__label">Costume contest signups</span>
          </div>
          <div class="display-count">
            <span class="display-count__number" data-karaoke-count>{{ karaoke_count }}</span>
            <span class="display-count__label">Karaoke signups</span>
          </div>
        </div>
      </header>

      <main class="display-main">
        <section class="display-card{% if first_entry and not override %} active{% endif %}{% if first_entry and first_entry.get('cta') %} cta{% endif %}" data-display-card{% if not first_entry or override %} hidden{% endif %}>
          <div class="display-card__default" data-entry-default{% if first_entry and first_entry.get('cta_details') %} hidden{% endif %}>
            <div class="display-category" data-entry-type>{{ first_entry['category'] if first_entry else '' }}</div>
            <div class="display-primary" data-entry-primary>{{ first_entry['primary'] if first_entry else '' }}</div>
            <div class="display-secondary" data-entry-secondary>{{ first_entry['secondary'] if first_entry else '' }}</div>
            <div class="display-tertiary" data-entry-tertiary{% if not first_entry or not first_entry['tertiary'] %} hidden{% endif %}>{{ first_entry['tertiary'] if first_entry and first_entry['tertiary'] else '' }}</div>
          </div>
          <div class="display-cta-layout" data-cta-layout{% if not first_entry or not first_entry.get('cta_details') %} hidden{% endif %}>
            <p class="display-cta-lede" data-cta-lede>{{ cta_lede }}</p>
            <div class="display-cta-columns">
              <section class="display-cta-column">
                <h3 class="display-cta-heading">Wi-Fi access</h3>
                <dl class="display-cta-list">
                  <div class="display-cta-list__item">
                    <dt>Network</dt>
                    <dd data-cta-wifi-network>{{ cta_wifi_network }}</dd>
                  </div>
                  <div class="display-cta-list__item">
                    <dt>Password</dt>
                    <dd data-cta-wifi-password>{{ cta_wifi_password }}</dd>
                  </div>
                </dl>
              </section>
              <section class="display-cta-column">
                <h3 class="display-cta-heading">Signup portal</h3>
                <p class="display-cta-text" data-cta-portal-note>{{ cta_portal_note }}</p>
                <a
                  class="display-cta-url"
                  data-cta-portal-link
                  {% if cta_portal_url %}href="{{ cta_portal_url }}"{% endif %}
                  target="_blank"
                  rel="noopener"
                >{{ cta_portal_label }}</a>
              </section>
            </div>
            <p class="display-cta-reminder" data-cta-reminder>{{ cta_reminder }}</p>
          </div>
          <div class="display-scoreboard" data-scoreboard-layout hidden>
            <header class="display-scoreboard__header">
              <h2 class="display-scoreboard__title" data-scoreboard-title></h2>
              <p class="display-scoreboard__subtitle" data-scoreboard-subtitle hidden></p>
            </header>
            <ol class="display-scoreboard__list" data-scoreboard-list></ol>
            <p class="display-scoreboard__note" data-scoreboard-note hidden></p>
          </div>

          <div class="display-countdown" data-countdown-layout hidden>
            <div class="display-countdown__meta">
              <div class="display-countdown__category" data-countdown-category></div>
              <h2 class="display-countdown__title" data-countdown-title></h2>
              <p class="display-countdown__subtitle" data-countdown-subtitle hidden></p>
            </div>
            <div class="display-countdown__timer" data-countdown-timer>--:--:--</div>
            <p class="display-countdown__label" data-countdown-label hidden></p>
          </div>

          <a
            class="display-cta-link"
            data-entry-link
            {% if (first_entry and (first_entry.get('cta') or not first_entry.get('link'))) or not first_entry %}hidden{% endif %}
            {% if first_entry and first_entry.get('link') and not first_entry.get('cta') %}href="{{ first_entry['link'] }}"{% endif %}
            target="_blank"
            rel="noopener"
          >{{ first_entry['link_label'] if first_entry and first_entry.get('link_label') and not first_entry.get('cta') else (first_entry['link'] if first_entry and first_entry.get('link') and not first_entry.get('cta') else '') }}</a>
        </section>

        <section class="display-empty{% if not entries and not override %} is-visible{% endif %}" data-empty-state{% if override %} hidden{% endif %}>
          <div class="instruction-card">
            <div class="instruction-card__badge" aria-hidden="true">ðŸ‘»</div>
            <h2 class="instruction-card__title">Guide guests onto the signup hub</h2>
            <p class="instruction-card__subtitle">
              Walk them through these quick steps to get costumes and karaoke songs into the rotation.
            </p>
            <ol class="instruction-steps">
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Connect to the party Wi-Fi</h3>
                <p class="instruction-step__body">Open Wi-Fi settings and join our dedicated network.</p>
                <div class="instruction-callout" role="group" aria-label="Wi-Fi credentials">
                  <div class="instruction-callout__item">
                    <span class="instruction-callout__label">Network</span>
                    <strong class="instruction-callout__value">Halloween Party Wi-Fi</strong>
                  </div>
                  <div class="instruction-callout__item">
                    <span class="instruction-callout__label">Password</span>
                    <strong class="instruction-callout__value">halloween</strong>
                  </div>
                </div>
              </li>
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Visit the Halloween hub</h3>
                <p class="instruction-step__body">
                  In a browser, enter the address below to load the signup page.
                </p>
                <p class="instruction-step__body">
                  <a class="instruction-url" href="http://10.0.0.241/halloween" target="_blank" rel="noopener">http://10.0.0.241/halloween</a>
                </p>
              </li>
              <li class="instruction-step">
                <h3 class="instruction-step__heading">Add their picks to the lineup</h3>
                <p class="instruction-step__body">
                  Use the forms on the page to submit their costume and queue a karaoke song so it appears on this screen.
                </p>
                <ul class="instruction-substeps">
                  <li>Tap the <strong>Costume</strong> form for outfit entries.</li>
                  <li>Tap the <strong>Karaoke</strong> form to reserve a song.</li>
                </ul>
              </li>
            </ol>
          </div>
        </section>
        <section class="display-override" data-override-state{% if not override %} hidden{% endif %}>
          <div class="display-override__layout" data-override-layout data-layout="single">
            <div class="display-override__card" data-primary-override-card>
              <div class="display-override__general" data-override-general>
              <h2 class="display-override__title" data-override-title>{{ override.title if override else '' }}</h2>
              <p class="display-override__highlight" data-override-highlight{% if not override or not override.get('highlight') %} hidden{% endif %}>{{ override.highlight if override and override.get('highlight') else '' }}</p>
              <p class="display-override__message" data-override-message>{{ override.message if override else '' }}</p>
              <ul class="display-override__details" data-override-details{% if not override or not override.get('details') %} hidden{% endif %}>
                {% if override and override.get('details') %}
                  {% for detail in override.details %}
                    <li>{{ detail }}</li>
                  {% endfor %}
                {% endif %}
              </ul>
            </div>
              <div class="display-override__karaoke" data-override-karaoke hidden>
              <h2 class="karaoke-card__title" data-karaoke-title></h2>
              <p class="karaoke-card__subtitle" data-karaoke-subtitle></p>
              <p class="karaoke-card__message" data-karaoke-message></p>
              <div class="karaoke-card__content">
                <section class="karaoke-card__countdown" data-karaoke-countdown-section>
                  <p class="karaoke-card__label">Countdown to showtime</p>
                  <p class="karaoke-card__timer" data-karaoke-countdown>--:--:--</p>
                  <p class="karaoke-card__note" data-karaoke-countdown-note hidden></p>
                </section>
              </div>
            </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <script id="entries-data" type="application/json">{{ entries | tojson }}</script>
    <script id="override-data" type="application/json">{{ override | tojson }}</script>
    <script src="{{ url_for('static', filename='display.js') }}"></script>
  </body>
</html>
